# 什么是线程池
线程池就是一个容纳多个线程的容器，对于一线线程我们可以多次对此线程进行重复使用，从而省去频繁创建线程对象的操作。
# 为什么要使用线程池
频繁的进行进程的创建与销毁将带来很多开销。不但如此，进程间频繁的切换也将减低 CPU 的利用率。 如果能复用之前创建的进程，而不是为每个并发任务创建一个进程，能有效降低进程创建与销毁的开销并减少进程间切换，从而减少对 CPU 资源的浪费。 虽然线程创建与销毁的代价小于进程创建与销毁，隶属同一进程的线程间切换的代价也小于进程间切换，但复用之前创建的线程，也能有效降低线程创建与销毁的开销并减少线程间切换，从而减少对 CPU 资源的浪费。                                        
当任务很多的时，我们就可以调用线程池，从而有效的的对CPU资源的浪费。

# 线程池的工作流程图

# 任务队列
我们应该以任务队列的形式存储任务，线程池中的线程只需要从任务队列中拿任务就可以了
```c
typedef struct task
{
    void(*run)(void*arg);//函数指针，指向一个函数(任务)
    void*arg;            //上面指针所指向函数的参数
    struct task *next;  //next指针，指向下一个任务节点
}task;
```
这样我们就把任务队列创建好了。
# 线程池的创建
```c
typedef struct threadpool
{
    task*first;   //指向任务队列的起始位置
    task*end;     //指向任务队列的末尾位置
    int threadNUM;//线程数量
    int tasksize;//任务数量
    pthread_mutex_t mutexpool;//锁整个线程池
    pthread_cond_t notempty;//任务队列是不是空
    int shutdown;//是不是要销毁线程池，销毁为1，不销毁为0
}threadpool;
```
